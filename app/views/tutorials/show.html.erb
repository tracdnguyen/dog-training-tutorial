<div class="container border">
  <h2><%= @tutorial.title%></h2>
  <p><%= @tutorial.content %></p>
</div>
</br>
<div class="container ">
  <% if !!@tutorial.video_link %>
    Link To Video: <%= link_to @tutorial.video_link, @tutorial.video_link %>
  <% end %>
</div>
</br>
<div class="container">
  <%= link_to "Comments", tutorial_comments_path(@tutorial) %>
</div>
</br>

<%= render @tutorial.comments %>

<%= render partial: "comments/form", locals: { comment: @comment, tutorial: @tutorial } %>

<div class="container">
  <% if @tutorial.trainer == current_trainer %>
    <%= link_to "Edit Tutorial", edit_tutorial_path(@tutorial) %>
    <%= link_to "Delete Tutorial", @tutorial, method: :delete, data: { confirm: "Are you sure you want to delete this tutorial?"} %>
  <% end %>
</div>

<a href="#" class="js-next" data-id="<%=@tutorial.id%>">Next...</a>

<script type="text/javascript" charset="utf-8">
$(function () {
  $(".js-next").on("click", function(e) {
    e.preventDefault();
    var nextId = parseInt($(".js-next").attr("data-id")) + 1;
    $.getJSON("/tutorials/" + nextId + "/tutorial_data", function(data) {
      $("div.container.border > h2").text(data["title"]);
      $("div.container.border > p").text(data["content"]);
      // re-set the id to current on the link
      $(".js-next").attr("data-id", data["id"]);
    });
  });
});
</script>
